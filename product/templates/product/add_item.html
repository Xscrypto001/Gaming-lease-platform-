{% extends "product/base.html" %}
{% block content %}
<div class="min-h-screen bg-black from-gray-900 via-emerald-900 to-gray-900 p-6">
  <div class="max-w-4xl mx-auto">
    <!-- Header Section -->
    <div class="mb-8">
      <div class="flex items-center space-x-4 mb-6">
        <div class="w-16 h-16 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
        </div>
        <div>
          <h1 class="text-4xl font-bold text-white mb-2">Add New Item</h1>
          <p class="text-gray-400">Share your items with the community</p>
        </div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="bg-gray-800/50 backdrop-blur-lg border border-gray-700/50 rounded-2xl p-8 shadow-2xl">
      <form method="POST" id="add-item-form" class="space-y-6">
        {% csrf_token %}
        
        <!-- Item Name Field -->
        <div class="space-y-2">
          <label for="name" class="flex items-center text-sm font-medium text-gray-300 mb-2">
            <svg class="w-4 h-4 mr-2 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
            </svg>
            Item Name *
          </label>


<div>
        <label class="block text-gray-300 mb-2">Upload File / Image</label>
        <input type="file" name="file"
          class="w-full text-gray-300 file:mr-4 file:py-2 file:px-4
                 file:rounded-lg file:border-0
                 file:text-sm file:font-semibold
                 file:bg-indigo-600 file:text-white
                 hover:file:bg-indigo-700">
      </div>

          <div class="relative">
            <input 
              type="text" 
              id="name" 
              name="name" 
              class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all duration-300"
              placeholder="Enter item name (e.g., Camera, Book, Tool)"
              required 
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
              </svg>
            </div>
          </div>
          <div class="text-xs text-gray-500 ml-1">Give your item a clear, descriptive name</div>
        </div>

        <!-- Description Field -->
        <div class="space-y-2">
          <label for="description" class="flex items-center text-sm font-medium text-gray-300 mb-2">
            <svg class="w-4 h-4 mr-2 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
            </svg>
            Description
          </label>
          <div class="relative">
            <textarea 
              id="description" 
              name="description" 
              rows="4"
              class="w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all duration-300 resize-none"
              placeholder="Describe your item, its condition, any special instructions, or what makes it unique..."
            ></textarea>
            <div class="absolute bottom-3 right-3">
              <span class="text-xs text-gray-500" id="char-count">0/500</span>
            </div>
          </div>
          <div class="text-xs text-gray-500 ml-1">Optional but recommended to help others understand your item better</div>
        </div>

        <!-- Additional Options -->
        <div class="bg-gray-700/30 rounded-xl p-4 space-y-4">
          <h3 class="text-lg font-semibold text-white flex items-center">
            <svg class="w-5 h-5 mr-2 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
            </svg>
            Item Settings
          </h3>
          
          <div class="grid md:grid-cols-2 gap-4">
            <div class="space-y-2">
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" id="available-immediately" class="form-checkbox h-4 w-4 text-emerald-500 rounded focus:ring-emerald-500 focus:ring-offset-0 bg-gray-600 border-gray-500">
                <span class="text-sm text-gray-300">Available for borrowing immediately</span>
              </label>
            </div>
            
            <div class="space-y-2">
              <label class="flex items-center space-x-3 cursor-pointer">
                <input type="checkbox" id="notify-requests" class="form-checkbox h-4 w-4 text-emerald-500 rounded focus:ring-emerald-500 focus:ring-offset-0 bg-gray-600 border-gray-500" checked>
                <span class="text-sm text-gray-300">Notify me of borrow requests</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-700/50">
          <button 
            type="submit" 
            class="flex-1 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl font-medium hover:from-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"
            id="submit-btn"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
            </svg>
            <span>Add Item</span>
          </button>
          
          <a 
            href="{% url 'my_items' %}" 
            class="flex-1 bg-gray-700/50 text-gray-300 px-6 py-3 rounded-xl font-medium hover:bg-gray-600/50 transition-all duration-300 border border-gray-600/50 hover:border-gray-500/50 flex items-center justify-center space-x-2"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            <span>Cancel</span>
          </a>
        </div>
      </form>

      <!-- Quick Tips -->
      <div class="mt-8 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4">
        <div class="flex items-start space-x-3">
          <div class="w-6 h-6 bg-emerald-500/20 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
            <svg class="w-4 h-4 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <div>
            <h4 class="text-sm font-semibold text-emerald-300 mb-2">Tips for adding items:</h4>
            <ul class="text-sm text-emerald-200/80 space-y-1">
              <li>• Use clear, specific names (e.g., "Canon DSLR Camera" instead of just "Camera")</li>
              <li>• Include condition, brand, or model in the description</li>
              <li>• Mention any special handling instructions or accessories included</li>
              <li>• Be honest about the item's condition to build trust</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('add-item-form');
  const nameInput = document.getElementById('name');
  const descriptionInput = document.getElementById('description');
  const charCount = document.getElementById('char-count');
  const submitBtn = document.getElementById('submit-btn');
  
  // Character counter for description
  descriptionInput.addEventListener('input', function() {
    const currentLength = this.value.length;
    const maxLength = 500;
    charCount.textContent = `${currentLength}/${maxLength}`;
    
    if (currentLength > maxLength * 0.9) {
      charCount.classList.add('text-yellow-400');
      charCount.classList.remove('text-gray-500');
    } else if (currentLength >= maxLength) {
      charCount.classList.add('text-red-400');
      charCount.classList.remove('text-yellow-400', 'text-gray-500');
    } else {
      charCount.classList.add('text-gray-500');
      charCount.classList.remove('text-yellow-400', 'text-red-400');
    }
  });
  
  // Form validation and enhancement
  nameInput.addEventListener('input', function() {
    if (this.value.length > 0) {
      this.classList.add('border-emerald-500/50');
      this.classList.remove('border-gray-600/50');
    } else {
      this.classList.remove('border-emerald-500/50');
      this.classList.add('border-gray-600/50');
    }
  });
  
  // Form submission with loading state
  form.addEventListener('submit', function(e) {
    // Add loading state
    submitBtn.disabled = true;
    submitBtn.innerHTML = `
      <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
      </svg>
      <span>Adding Item...</span>
    `;
    
    // Basic validation
    if (!nameInput.value.trim()) {
      e.preventDefault();
      submitBtn.disabled = false;
      submitBtn.innerHTML = `
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
        <span>Add Item</span>
      `;
      nameInput.focus();
      nameInput.classList.add('border-red-500/50');
      return;
    }
  });
  
  // Add entrance animation
  const container = document.querySelector('.bg-gray-800\\/50');
  container.style.opacity = '0';
  container.style.transform = 'translateY(20px)';
  setTimeout(() => {
    container.style.transition = 'all 0.6s ease-out';
    container.style.opacity = '1';
    container.style.transform = 'translateY(0)';
  }, 100);
  
  // Focus first input
  nameInput.focus();
});
</script>

<style>
/* Custom scrollbar for dark theme */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #1f2937;
}

::-webkit-scrollbar-thumb {
  background: #4b5563;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Custom checkbox styling */
.form-checkbox {
  appearance: none;
  background-color: #4b5563;
  border: 1px solid #6b7280;
  border-radius: 0.25rem;
  width: 1rem;
  height: 1rem;
  position: relative;
  cursor: pointer;
}

.form-checkbox:checked {
  background-color: #10b981;
  border-color: #10b981;
}

.form-checkbox:checked::before {
  content: '✓';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 0.75rem;
  font-weight: bold;
}

.form-checkbox:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* Input focus effects */
input:focus, textarea:focus {
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* Button hover effects */
button:hover {
  transform: translateY(-1px);
}

button:active {
  transform: translateY(0);
}

/* Floating label effect */
.relative input:focus + .absolute,
.relative input:not(:placeholder-shown) + .absolute {
  transform: translateY(-1.5rem) scale(0.875);
  color: #10b981;
}
</style>
{% endblock %}
